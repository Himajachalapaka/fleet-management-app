<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <style>
        
    </style>
</head>
<body>
    <header class="navbar">
        <div class="navbar_title">
            <h2>Fleet Management Admin</h2>
        </div>
        <div>
        <select id="filter-category">
            <option value="All"> All Category </option>
             <option value="Auto"> Auto </option>
              <option value="Car"> Car </option>
               <option value="Truck"> Truck </option>
                <option value="Bus"> Bus </option>

        </select>

        <select id="filter-availability">
            <option value="All"> All Availability </option>
            <option value="Available"> Available</option>
            <option value="unavailable"> unavailable</option>
        </select>
        <button id="clearfilter-button">
            Clear Filter

        </button>
    </div>
    </header>
    <main class="main-container">

  <!---side bar--->
  <aside class="sidebar">
    <h2>Add Fleet</h2>
    <form id="fleetForm">
    <input id="regNo" type = "text" placeholder="Regd no of vehile">
    <select id="category" placeholder="Select Category">
        <option value = "select"> Select category </option>
        <option value = "Auto"> Auto </option>
        <option value = "Car"> Car </option>
        <option value = "Truck"> Truck </option>
        <option value = "Bus"> Bus </option>
    </select>
    <input id="driverName" type = "text" placeholder="Driver name">
    <select id="Availability">
        <option value="">---Select---</option>
        <option value="Available">Available</option>
        <option value="unavailable">unavailable</option>
    </select>
    <button type="submit">Add Fleet</button>
    </form>
  </aside>
  <! -- Cards -- >
  <section id="cardsContainer" class="cards-container">

  </section>
</main>


<script>
    const fleetForm = document.getElementById("fleetForm");
    const cardsContainer= document.getElementById("cardsContainer");
    const filterCategory = document.getElementById("filter-category");
    const filterAvailability = document.getElementById("filter-availability");
    const clearFilterBtn = document.getElementById("clearfilter-button");

    const VEHICLE_IMAGE_SRC = "https://coding-platform.s3.amazonaws.com/dev/lms/tickets/5e80fcb6-3f8e-480c-945b-30a5359eb40e/JNmYjkVr3WOjsrbu.png"
fleetForm.addEventListener("submit", function(event) {
    event.preventDefault();
    const regNo = document.getElementById("regNo").value.trim();
    const category = document.getElementById("category").value;
    const driverName = document.getElementById("driverName").value.trim();
    const availability = document.getElementById("availability").value;

    if(!regNo || !category || !driverName || !availability){
        alert("All fields are required");
        return;
    }
    const newVehicle = {
        id: Date.now(),
        regNo:regNo,
        category : category,
        driverName: driverName,
        isAvailable : availability === "Available"
    };
    vehicles.push(newVehicle);
    fleetForm.reset();
    renderCards();
});
function renderCards() {
    cardsContainer.innerHTML="";
    let filtered = vehicles.slice();
    if(filterCategory.value!== "All"){
        filtered = filtered.filter(function (v){
            return v.category === filterCategory.value;
    });
    }
    if(filter-availability.value !== "All"){
        const shouldBeAvailable = filter-availability.value ==="Available";
        filtered=filtered.filter(function(v){
            return v.isAvailable === shouldBeAvailable;
        });
    }
    filtered.forEach(function(vehicle){
        const card = document.createElement("div");
        card.className="fleet-card";
        const availabilityText = vehicle.isAvailable ? "Available" : "Unavailable";
        const statusClass= vehicle.isAvailable ? "status-available" : "status-unavailable";
        card.innerHTML = ` <img src="${VEHICLE_IMAGE_SRC}" alt="vehicle-img">
        <h3>${vehicle.regNo}</h3>
        <p> <strong> Category: </strong>${vehicle.category}</p>
         <p> <strong> Driver: </strong>
             <span class="driver-name">${vehicle.driverName}</span></p>
            <span class="card-buttons">
                `;


                const updateBtn = card.querySelector(".btn-update");
                const toggleBtn = card.querySelector(".btn-toggle");
        const deleteBtn = card.querySelector(".btn-delete");

        updateBtn.addEventListener("click", function(){
            const newName = prompt("Enter new driver name");

        }

    }
}
</script>
</body>
</html>